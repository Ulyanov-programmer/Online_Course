import{isNullOrWhiteSpaces,sleep}from"./general.js";export default class ElementModal{constructor(e){if(isNullOrWhiteSpaces(e.contentElementsSelector,e.modalElementSelector))throw"[ELEMENT-MODAL] Some selector is null or white spaces!";this.contentElements=document.querySelectorAll(e.contentElementsSelector),this.modalElement=document.querySelector(e.modalElementSelector),this.animationDuration=1e3*parseFloat(getComputedStyle(this.modalElement).getPropertyValue("transition-duration"));for(let t of this.contentElements)t.addEventListener("mouseenter",(()=>this.appendModalMenu(t,this.modalElement))),t.addEventListener("mouseleave",(()=>this.removeModalMenu(t,this.animationDuration))),-1!=t.tabIndex&&(t.addEventListener("focus",(()=>this.appendModalMenu(t,this.modalElement))),t.addEventListener("blur",(()=>this.removeModalMenu(t,this.animationDuration))))}async appendModalMenu(e,t){let n=t.cloneNode(!0);e.append(n),await sleep(30),n.classList.remove("_non-active")}async removeModalMenu(e,t){let n=e.lastElementChild;n&&(n.classList.add("_non-active"),await sleep(t+100),n.remove())}}