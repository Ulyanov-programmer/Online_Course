import{isNullOrWhiteSpaces}from"./general.js";export default class AnimateByScroll{constructor(t,...e){AnimateByScroll.repeatingAnimations=t.repeatingAnimations,AnimateByScroll.elements=e,this.checkAndToggleAnimationForElements();for(let i of AnimateByScroll.elements)i.mediaQueries.length>0&&i.setMediaProperties();window.addEventListener("scroll",(()=>{this.checkAndToggleAnimationForElements()}),!1),window.addEventListener("resize",(()=>{for(let t of AnimateByScroll.elements)t.setMediaProperties()}),!1)}checkAndToggleAnimationForElements(){window.requestAnimationFrame((()=>{for(let t of AnimateByScroll.elements)this.isPartiallyVisible(t)&&!t.htmlElement.classList.contains(AnimateByScroll.activeAnimationClass)?setTimeout((()=>t.htmlElement.classList.add(AnimateByScroll.activeAnimationClass)),t.timeoutBeforeStart):!this.isPartiallyVisible(t)&&AnimateByScroll.repeatingAnimations&&t.htmlElement.classList.remove(AnimateByScroll.activeAnimationClass)}))}isPartiallyVisible(t){var e=t.htmlElement.getBoundingClientRect(),i=e.top,a=e.bottom;let o=e.height*t.animStartCoeff;return i+o>=0&&o+window.innerHeight>=a}}AnimateByScroll.activeAnimationClass="active";export class AnimationElement{constructor(t,...e){if(isNullOrWhiteSpaces(t.selector)){if(t.animateStartCoeff<=0||t.animateStartCoeff>1)throw new RangeError("animateStartCoeff < 0 or > 1");throw new RangeError("Selector is null of white spaces!")}this.timeoutBeforeStart=t.timeoutBeforeStart,this.htmlElement=document.querySelector(t.selector),this.animStartCoeff=t.animateStartCoeff,this.defTimeoutBeforeStart=t.timeoutBeforeStart,this.defAnimStartCoeff=t.animateStartCoeff,this.mediaQueries=e}setMediaProperties(){for(let t of this.mediaQueries)window.innerWidth<=t.activeWitdh?(this.animStartCoeff=t.animateStartCoeff,this.timeoutBeforeStart=t.timeoutBeforeStart):(this.animStartCoeff=this.defAnimStartCoeff,this.timeoutBeforeStart=this.defTimeoutBeforeStart)}}export class AnimationMediaQuery{constructor(t,e,i){if(e<=0||e>1)throw new RangeError("animateStartCoeff < 0 or > 1");this.activeWitdh=t,this.animateStartCoeff=e,this.timeoutBeforeStart=i}}