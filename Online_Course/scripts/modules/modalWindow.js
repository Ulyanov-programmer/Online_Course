import{isNullOrWhiteSpaces,returnScrollbarWidth}from"./general.js";export default class ModalWindowMenu{constructor(e){if(isNullOrWhiteSpaces(e.modalLinksSelector,e.modalClosersSelector))throw new Error("[MODALWINDOW] Incorrect arguments!");e.fsMenuSelector&&(ModalWindowMenu.fsMenuClasslist=document.querySelector(e.fsMenuSelector).classList),ModalWindowMenu.modalLinks=document.querySelectorAll(e.modalLinksSelector);for(let o of ModalWindowMenu.modalLinks)o.addEventListener("click",(()=>{let e=o.dataset.modalLink;if(e){let o=document.getElementById(e);ModalWindowMenu.transitionTimeout=1e3*parseFloat(getComputedStyle(o).getPropertyValue("transition-duration")),this.showOrHideModal(o)}}));ModalWindowMenu.modalClosers=document.querySelectorAll(e.modalClosersSelector);for(let o of ModalWindowMenu.modalClosers)o.addEventListener("click",(()=>this.closeModal(o.closest(".modal-window"),!0)));document.addEventListener("keydown",(e=>{if("Escape"!=e.code)return;let o=document.querySelector(".modal-window.active");o&&this.closeModal(o,!0)}))}showOrHideModal(e){if(e&&ModalWindowMenu.UNLOCK){let o=document.querySelector(".modal-window.active");o?this.closeModal(o,!1):this.toggleBodyScroll(!1),e.classList.add("active")}e.addEventListener("click",(o=>{null==o.target.closest(".modal-window__content")&&this.closeModal(e,!0)}))}closeModal(e,o){0!=ModalWindowMenu.UNLOCK&&(e.classList.remove("active"),setTimeout((()=>{o&&this.toggleBodyScroll(!0)}),2*ModalWindowMenu.transitionTimeout))}toggleBodyScroll(e){let o=document.querySelector("header");this.chekPossibileSwitchScroll(e)?(document.body.style.paddingRight="0",o.style.paddingRight="0",document.body.style.overflow="auto"):(document.body.style.paddingRight=returnScrollbarWidth()+"px",o.style.paddingRight=returnScrollbarWidth()+"px",document.body.style.overflow="hidden"),ModalWindowMenu.UNLOCK=!1,setTimeout((()=>{ModalWindowMenu.UNLOCK=!0}),2*ModalWindowMenu.transitionTimeout)}chekPossibileSwitchScroll(e){return ModalWindowMenu.fsMenuClasslist?!(ModalWindowMenu.fsMenuClasslist.contains("active")||!e):e}}ModalWindowMenu.UNLOCK=!0;